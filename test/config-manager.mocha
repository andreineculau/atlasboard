var assert = require ('assert'),
    path = require('path');

describe ('config manager', function(){

  it('should handle non existant config file', function(done){
    var configFilePath = path.join(process.cwd(), 'config', 'non_existant_config.json');
    var config = require ('../lib/config-manager')(configFilePath);
    assert.equal(false, config.exists());
    assert.equal(false, config.valid());
    assert.equal(null, config.get('test'));
    done();
  });

  it('should handle invalid config file', function(done){
    var configFilePath = path.join(process.cwd(), 'test','config', 'invalid_config.json');
    var config = require ('../lib/config-manager')(configFilePath);
    assert.equal(true, config.exists());
    assert.equal(false, config.valid());
    assert.equal(null, config.get('test'))
    done();
  });

  it('should handle valid config file', function(done){
    var configFilePath = path.join(process.cwd(), 'test','config', 'valid_config.json');
    var config = require ('../lib/config-manager')(configFilePath);
    assert.equal(true, config.exists());
    assert.equal(true, config.valid());
    assert.equal('val1', config.get('key1'));
    done();
  });

});